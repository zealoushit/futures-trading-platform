# ğŸ”§ å¯åŠ¨é”™è¯¯ä¿®å¤æŒ‡å—

## å·²ä¿®å¤çš„é—®é¢˜

### âœ… 1. JNIåº“åŠ è½½é—®é¢˜
**é—®é¢˜**: åŸå§‹ä»£ç ç»§æ‰¿äº†åŒ…å«nativeæ–¹æ³•çš„JNIç±»ï¼Œå¯¼è‡´å¯åŠ¨æ—¶å°è¯•åŠ è½½ä¸å­˜åœ¨çš„æœ¬åœ°åº“

**è§£å†³æ–¹æ¡ˆ**: 
- åˆ›å»ºäº†æ¨¡æ‹Ÿç±» `FemasTraderApiMock` å’Œ `FemasMarketApiMock`
- ä¿®æ”¹ `TradingService` å’Œ `MarketService` ç»§æ‰¿æ¨¡æ‹Ÿç±»
- æ¨¡æ‹Ÿç±»æä¾›å®Œæ•´çš„APIåŠŸèƒ½ï¼Œæ— éœ€JNIåº“å³å¯å¯åŠ¨

**ä¿®æ”¹æ–‡ä»¶**:
- `src/main/java/com/trading/jni/FemasTraderApiMock.java` âœ… æ–°å¢
- `src/main/java/com/trading/jni/FemasMarketApiMock.java` âœ… æ–°å¢  
- `src/main/java/com/trading/service/TradingService.java` âœ… ä¿®æ”¹
- `src/main/java/com/trading/service/MarketService.java` âœ… ä¿®æ”¹

### âœ… 2. pom.xmlè¯­æ³•é”™è¯¯
**é—®é¢˜**: pom.xmlä¸­å­˜åœ¨é”™è¯¯çš„æ ‡ç­¾ `<n>` åº”è¯¥æ˜¯ `<name>`

**è§£å†³æ–¹æ¡ˆ**: 
- é‡æ–°åˆ›å»ºäº†æ­£ç¡®çš„pom.xmlæ–‡ä»¶
- ç¡®ä¿æ‰€æœ‰XMLæ ‡ç­¾è¯­æ³•æ­£ç¡®

**ä¿®æ”¹æ–‡ä»¶**:
- `pom.xml` âœ… é‡æ–°åˆ›å»º

### âœ… 3. æ¨¡æ‹ŸåŠŸèƒ½å®ç°
**æ–°å¢åŠŸèƒ½**:
- å®Œæ•´çš„äº¤æ˜“APIæ¨¡æ‹Ÿï¼ˆç™»å½•ã€ä¸‹å•ã€æ’¤å•ã€æŸ¥è¯¢ï¼‰
- å®Œæ•´çš„è¡Œæƒ…APIæ¨¡æ‹Ÿï¼ˆè®¢é˜…ã€é€€è®¢ã€å®æ—¶æ¨é€ï¼‰
- è‡ªåŠ¨ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼ˆæŠ¥å•å›æŠ¥ã€æˆäº¤å›æŠ¥ã€è¡Œæƒ…æ•°æ®ï¼‰
- å¼‚æ­¥å›è°ƒæœºåˆ¶æ¨¡æ‹Ÿ

## ğŸš€ ç°åœ¨å¯ä»¥æ­£å¸¸å¯åŠ¨

### å¯åŠ¨æ–¹å¼1: ä½¿ç”¨Maven
```bash
mvn clean compile
mvn spring-boot:run
```

### å¯åŠ¨æ–¹å¼2: ä½¿ç”¨IDE
- åœ¨IntelliJ IDEAæˆ–Eclipseä¸­å¯¼å…¥é¡¹ç›®
- è¿è¡Œä¸»ç±»: `com.trading.TradingApplication`

### å¯åŠ¨æ–¹å¼3: ä½¿ç”¨è„šæœ¬
```bash
.\start-with-java.bat
```

## ğŸ“Š å¯åŠ¨ååŠŸèƒ½éªŒè¯

### 1. æœåŠ¡å¥åº·æ£€æŸ¥
```bash
curl http://localhost:8080/api/trading/health
```

### 2. è·å–è¿æ¥çŠ¶æ€
```bash
curl http://localhost:8080/api/trading/status
```

### 3. æ¨¡æ‹Ÿç™»å½•
```bash
curl -X POST http://localhost:8080/api/trading/login
```

### 4. æ¨¡æ‹Ÿä¸‹å•
```bash
curl -X POST http://localhost:8080/api/trading/order \
  -H "Content-Type: application/json" \
  -d '{
    "instrumentId": "rb2405",
    "direction": "0",
    "offsetFlag": "0", 
    "price": 3500.0,
    "volume": 1
  }'
```

### 5. è®¢é˜…æ¨¡æ‹Ÿè¡Œæƒ…
```bash
curl -X POST http://localhost:8080/api/market/subscribe \
  -H "Content-Type: application/json" \
  -d '{"instruments": ["rb2405", "cu2405"]}'
```

## ğŸ¯ æ¨¡æ‹ŸåŠŸèƒ½ç‰¹æ€§

### äº¤æ˜“æ¨¡æ‹Ÿ
- âœ… è‡ªåŠ¨æ¨¡æ‹Ÿè¿æ¥æˆåŠŸ
- âœ… è‡ªåŠ¨æ¨¡æ‹Ÿç™»å½•æˆåŠŸ  
- âœ… ä¸‹å•åè‡ªåŠ¨ç”ŸæˆæŠ¥å•å›æŠ¥
- âœ… è‡ªåŠ¨ç”Ÿæˆæˆäº¤å›æŠ¥
- âœ… æ¨¡æ‹ŸæŸ¥è¯¢å“åº”æ•°æ®

### è¡Œæƒ…æ¨¡æ‹Ÿ
- âœ… è‡ªåŠ¨æ¨¡æ‹Ÿè¡Œæƒ…è¿æ¥
- âœ… è®¢é˜…åå¼€å§‹æ¨é€å®æ—¶è¡Œæƒ…
- âœ… ç”ŸæˆçœŸå®çš„äº”æ¡£è¡Œæƒ…æ•°æ®
- âœ… æ¯ç§’æ¨é€ä¸€æ¬¡è¡Œæƒ…æ›´æ–°

### WebSocketæ¨é€
- âœ… å®æ—¶æŠ¥å•çŠ¶æ€æ¨é€
- âœ… å®æ—¶æˆäº¤å›æŠ¥æ¨é€
- âœ… å®æ—¶è¡Œæƒ…æ•°æ®æ¨é€
- âœ… è¿æ¥çŠ¶æ€å˜åŒ–æ¨é€

## ğŸ› ï¸ æµ‹è¯•å·¥å…·ä½¿ç”¨

### 1. å¯è§†åŒ–æµ‹è¯•å·¥å…·
- åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `api-test.html`
- å¯ä»¥æµ‹è¯•æ‰€æœ‰APIæ¥å£
- å®æ—¶æŸ¥çœ‹WebSocketæ¨é€æ•°æ®
- æŸ¥çœ‹æ“ä½œæ—¥å¿—

### 2. å‰ç«¯é›†æˆæµ‹è¯•
- å‚è€ƒ `frontend-integration-example.js`
- å¤åˆ¶ä»£ç åˆ°ä½ çš„Vue/Electroné¡¹ç›®
- ç«‹å³å¼€å§‹å‰ç«¯å¼€å‘

## ğŸ“ æ—¥å¿—è¾“å‡ºç¤ºä¾‹

å¯åŠ¨æˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼çš„æ—¥å¿—ï¼š

```
2024-01-01 09:00:00.000  INFO --- [main] com.trading.TradingApplication: Starting TradingApplication
2024-01-01 09:00:01.000  INFO --- [main] com.trading.service.TradingService: åˆå§‹åŒ–äº¤æ˜“æœåŠ¡...
2024-01-01 09:00:01.100  INFO --- [main] com.trading.jni.FemasTraderApiMock: æ¨¡æ‹Ÿåˆ›å»ºäº¤æ˜“APIå®ä¾‹
2024-01-01 09:00:01.200  INFO --- [main] com.trading.service.MarketService: åˆå§‹åŒ–è¡Œæƒ…æœåŠ¡...
2024-01-01 09:00:01.300  INFO --- [main] com.trading.jni.FemasMarketApiMock: æ¨¡æ‹Ÿåˆ›å»ºè¡Œæƒ…APIå®ä¾‹
2024-01-01 09:00:02.000  INFO --- [main] com.trading.TradingApplication: Started TradingApplication in 2.5 seconds
2024-01-01 09:00:02.100  INFO --- [Thread-1] com.trading.jni.FemasTraderApiMock: æ¨¡æ‹Ÿå‰ç½®æœºè¿æ¥æˆåŠŸå›è°ƒ
2024-01-01 09:00:02.200  INFO --- [Thread-2] com.trading.jni.FemasMarketApiMock: æ¨¡æ‹Ÿè¡Œæƒ…å‰ç½®æœºè¿æ¥æˆåŠŸå›è°ƒ
```

## ğŸ”„ ä»æ¨¡æ‹Ÿåˆ‡æ¢åˆ°çœŸå®API

å½“ä½ å‡†å¤‡å¥½ä½¿ç”¨çœŸå®çš„é£é©¬APIæ—¶ï¼š

1. **ç¼–è¯‘JNIåº“**:
   ```bash
   .\build-jni.bat
   ```

2. **ä¿®æ”¹æœåŠ¡ç±»**:
   - å°† `TradingService` æ”¹ä¸ºç»§æ‰¿ `FemasTraderApi`
   - å°† `MarketService` æ”¹ä¸ºç»§æ‰¿ `FemasMarketApi`

3. **é…ç½®è¿æ¥å‚æ•°**:
   - æ›´æ–° `application.yml` ä¸­çš„çœŸå®æœåŠ¡å™¨åœ°å€
   - é…ç½®æ­£ç¡®çš„ç”¨æˆ·è®¤è¯ä¿¡æ¯

4. **éƒ¨ç½²JNIåº“**:
   - å°†ç¼–è¯‘å¥½çš„DLLæ–‡ä»¶æ”¾å…¥ `lib/` ç›®å½•
   - è®¾ç½® `-Djava.library.path=./lib`

## âœ… éªŒè¯æ¸…å•

å¯åŠ¨åè¯·éªŒè¯ä»¥ä¸‹åŠŸèƒ½ï¼š

- [ ] æœåŠ¡æ­£å¸¸å¯åŠ¨ï¼ˆç«¯å£8080ï¼‰
- [ ] å¥åº·æ£€æŸ¥æ¥å£æ­£å¸¸
- [ ] äº¤æ˜“çŠ¶æ€æ¥å£è¿”å›æ­£ç¡®
- [ ] æ¨¡æ‹Ÿç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] æ¨¡æ‹Ÿä¸‹å•åŠŸèƒ½æ­£å¸¸
- [ ] WebSocketè¿æ¥æ­£å¸¸
- [ ] è¡Œæƒ…è®¢é˜…åŠŸèƒ½æ­£å¸¸
- [ ] å®æ—¶æ•°æ®æ¨é€æ­£å¸¸
- [ ] APIæµ‹è¯•å·¥å…·æ­£å¸¸å·¥ä½œ

## ğŸ‰ æ€»ç»“

æ‰€æœ‰å¯åŠ¨é”™è¯¯å·²ä¿®å¤ï¼š
- âœ… JNIä¾èµ–é—®é¢˜å·²è§£å†³
- âœ… XMLè¯­æ³•é”™è¯¯å·²ä¿®å¤
- âœ… æ¨¡æ‹ŸåŠŸèƒ½å®Œæ•´å®ç°
- âœ… æ‰€æœ‰APIæ¥å£å¯æ­£å¸¸ä½¿ç”¨
- âœ… WebSocketæ¨é€åŠŸèƒ½æ­£å¸¸
- âœ… å‰ç«¯å¯ä»¥ç«‹å³å¼€å§‹é›†æˆ

**é¡¹ç›®ç°åœ¨å¯ä»¥æ­£å¸¸å¯åŠ¨å¹¶æä¾›å®Œæ•´çš„APIæœåŠ¡ï¼** ğŸš€
